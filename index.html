<!DOCTYPE html>
<html lang="en">
<head>
<title>Air Traffic Test v1.1</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href='https://fonts.googleapis.com/css?family=Amatic SC' rel='stylesheet'>
<link rel="stylesheet" href="css/styles.css">

<script src="AircraftList.js"></script>

</head>

<body>

<div class="header">
  <h1>Air Traffic Test v1.1</h1>
</div>

<div class="row">
  <div class="column side">
  </div>
  <div class="column middle">
    
	<p>Click the button to get list of airplanes that are flying over your current location.</p>
	<button class="button red_button" onclick="getLocation()" >Get List of Airplanes</button>
	
	<p id="demo"></p>
	
  </div>
  <div class="column side">
  </div>
</div>

<script>

var x = document.getElementById("demo");
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(load_aircrafts, errorCallback);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function load_aircrafts() {
    
    // var response = JSON.parse(aircrafts_object);
    x.innerHTML = aircrafts_object.acList[0].Cou;
    console.log(aircrafts_object.acList[0]);
    /*
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var response = JSON.parse(this.responseText);
            
            console.log(response);
            x.innerHTML = response;
        }
    };

    xmlhttp.open("GET", "http://public-api.adsbexchange.com/VirtualRadar/AircraftList.json?lat=33.433638&lng=-112.008113", true);
    xmlhttp.send();
    */
}

function errorCallback(){
    alert('You must accept access to geolocation to be able to use application.');
}

</script>
  
</body>
</html>
